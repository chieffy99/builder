
à¹€à¸‚à¹‰à¸²à¹ƒà¸ˆà¸§à¹ˆà¸²à¸„à¸¸à¸“à¸•à¹‰à¸­à¸‡à¸à¸²à¸£ â€œà¹à¸¡à¹‡à¸›à¸œà¸±à¸‡à¸£à¸°à¸šà¸šâ€ (System Mapping) à¸ªà¸³à¸«à¸£à¸±à¸šà¹€à¸§à¹‡à¸šà¹à¸­à¸› â€” à¸‹à¸¶à¹ˆà¸‡à¸œà¸¡à¹€à¸‚à¹‰à¸²à¹ƒà¸ˆ (à¸­à¸²à¸ˆà¸œà¸´à¸”à¸à¸¥à¸²à¸”à¹€à¸¥à¹‡à¸à¸™à¹‰à¸­à¸¢) à¸§à¹ˆà¸²à¸­à¸¢à¸²à¸à¹ƒà¸«à¹‰à¸„à¸£à¸­à¸šà¸„à¸¥à¸¸à¸¡à¸—à¸±à¹‰à¸‡ â¶â€‹à¸ªà¸–à¸²à¸›à¸±à¸•à¸¢à¸à¸£à¸£à¸¡ Frontend-Backend à¹à¸šà¸šà¸¡à¸µ Server-Side Rendering, â·â€‹à¹‚à¸„à¸£à¸‡à¸ªà¸£à¹‰à¸²à¸‡à¸à¸²à¸™à¸‚à¹‰à¸­à¸¡à¸¹à¸¥ MySQL, à¹à¸¥à¸° â¸â€‹à¸‚à¸±à¹‰à¸™à¸•à¸­à¸™ DevOps deploy à¸‚à¸¶à¹‰à¸™ AWS à¹ƒà¸Šà¹ˆà¹„à¸«à¸¡à¸„à¸£à¸±à¸š?

à¸£à¸šà¸à¸§à¸™à¸¢à¸·à¸™à¸¢à¸±à¸™à¸«à¸£à¸·à¸­à¹à¸à¹‰à¹„à¸‚à¸ˆà¸¸à¸”à¸•à¹ˆà¸­à¹„à¸›à¸™à¸µà¹‰à¹ƒà¸«à¹‰à¸Šà¸±à¸”à¸à¹ˆà¸­à¸™à¸ˆà¸°à¸¥à¸‡à¸¡à¸·à¸­à¸­à¸­à¸à¹à¸šà¸šà¸ˆà¸£à¸´à¸‡ ğŸ™‚

à¹€à¸§à¹‡à¸šà¸™à¸µà¹‰à¸•à¹‰à¸­à¸‡ â€œà¸¡à¸µ Back-end à¹€à¸•à¹‡à¸¡à¸£à¸¹à¸›à¹à¸šà¸šâ€ à¸«à¸£à¸·à¸­à¹€à¸›à¹‡à¸™ â€œPure-Frontend (No-Server)â€ à¸•à¸²à¸¡ Master Prompt à¹€à¸”à¸´à¸¡?
à¸œà¸¥à¸¥à¸±à¸à¸˜à¹Œà¸—à¸µà¹ˆà¸•à¹‰à¸­à¸‡à¸à¸²à¸£à¸„à¸·à¸­ â€œà¸œà¸±à¸‡à¸ à¸²à¸ (diagram) + à¸„à¸³à¸­à¸˜à¸´à¸šà¸²à¸¢â€ à¸«à¸£à¸·à¸­ â€œà¸£à¸²à¸¢à¸à¸²à¸£ Task/Loom timelineâ€ ?
à¸¡à¸µà¸•à¸±à¸§à¸­à¸¢à¹ˆà¸²à¸‡ CSV/à¹‚à¸„à¹‰à¸”à¹€à¸šà¸·à¹‰à¸­à¸‡à¸•à¹‰à¸™à¸—à¸µà¹ˆà¸•à¹‰à¸­à¸‡à¸™à¸³à¸¡à¸²à¸›à¸£à¸°à¸à¸­à¸šà¸à¸²à¸£à¸­à¸˜à¸´à¸šà¸²à¸¢à¹€à¸à¸´à¹ˆà¸¡à¹€à¸•à¸´à¸¡à¸«à¸£à¸·à¸­à¹„à¸¡à¹ˆ?
à¸–à¹‰à¸²à¹€à¸‚à¹‰à¸²à¹ƒà¸ˆà¸–à¸¹à¸à¸•à¹‰à¸­à¸‡à¹à¸¥à¹‰à¸§ à¸œà¸¡à¸ˆà¸°à¸ˆà¸±à¸”à¸—à¸³ System Mapping (Component Diagram + Data-Flow + Task Breakdown) à¹ƒà¸«à¹‰à¹€à¸¥à¸¢à¸„à¸£à¸±à¸š

No file chosenNo file chosen
à¸à¹‡à¸­à¸¢à¸¹à¹ˆà¹ƒà¸™à¹„à¸Ÿà¸¥à¹Œà¸—à¸±à¹‰à¸‡à¸«à¸¡à¸” à¸ªà¹ˆà¸§à¸™à¹€à¸£à¸·à¹ˆà¸­à¸‡à¹€à¸—à¸„à¸™à¸´à¸„à¸‰à¸±à¸™à¹„à¸¡à¹ˆà¸£à¸¹à¹‰ à¸‰à¸±à¸™à¸•à¸­à¸šà¹„à¸¡à¹ˆà¹„à¸”à¹‰ à¸«à¸²à¸ prompt à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¸šà¸­à¸à¹„à¸”à¹‰à¸à¹‡à¸–à¸·à¸­à¸§à¹ˆà¸²à¸‰à¸±à¸™à¹„à¸¡à¹ˆà¸£à¸¹à¹‰à¸­à¸¢à¸¹à¹ˆà¸”à¸µ

SYSTEM-MAPPING & DELIVERY BLUEPRINT
Pure-Frontend â€œAntinormalization Dashboardâ€ (Master-Prompt v1.0 â€“ LOCKED)

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

HIGH-LEVEL ARCHITECTURE
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Browser is the only runtime â†’ three ES-Module layers that communicate via DOM CustomEvents.

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         spherePackReady          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Parser-Sphereâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ â”‚   UI-Shell    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  DataFrame, Sphere[]              â”‚ (Canvas + UX)â”‚
â–²  â–²                                         â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚  â”‚ validateSlots()                                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚ cardRequiresCalc
â”‚                              â”‚                    â–¼
CSV/TXT â”‚                              â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
file     â”‚                              â”‚  calcResultâ”‚ Formula-Card â”‚
â–¼                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â–¶â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
PapaParse / TSV fallback (optional)                 localForage-cache

â€¢  No server, no DB: every artefact is in-memory; persistence = File Download (layout.json / txt cache).
â€¢  Third-party libs (all via CDN): Danfo.js (DataFrame), Chart.js (visuals), interact.js (D&D/resize), localForage (IndexedDB wrapper).

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2. DETAILED COMPONENT SPECS
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2.1 parserSphere.js
â€¢ parseCSV()  â€“ ingests string, splits HEAD:/DATA:, returns Danfo DataFrame + Sphere[]
â€¢ Sphere structure (see page 2 col. 1 of the PDF):
{ code, rawHeader, family:{id1,id2,statN,statC,slot}, typeHint, invert }
â€¢ Emits â€˜spherePackReadyâ€™.
â€¢ validateSlots(df)  â€“ numeric vs nonNumeric categorisation.

2.2 formulaCard.js
â€¢ Public agg funcs: sumIf, countIf, uniqueIf, indexIf, avgIf.
â€¢ filtersObj schema = { id1, id2, statN, statC, dateFrom, dateTo, slot, invert? }.
â€¢ _aggregate() builds Boolean mask with Danfo query, observes â€œInvertâ€ rule, caches by JSON-hash key in localForage.
â€¢ Returns { result, rows, meta:{durationMs,cached} }.

2.3 uiShell.js
â€¢ â€œWorld-Fittingâ€ sidebar lists every Sphere (button-style div).
â€¢ Drag sphere â†’ canvas â‡’ _spawnCard() generates <div.card> with Chart canvas.
â€¢ interact.js grants free move / resize; ESC or Delete (back-log) closes card.
â€¢ Top-bar actions: Toggle Theme, Validate Slots, Save Layout, Load Layout.
â€¢ Layout JSON = {theme, cards:[{code,x,y,w,h}]}.
â€¢ Accessibility: data-theme = dark | light | hc; all colours via CSS custom-props.

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
3. DATA FLOW WALK-THROUGH
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

User clicks â€œLoad CSVâ€ (file input).
File text â†’ parseCSV()
parserSphere dispatches spherePackReady(df, spheres[])
uiShell renders sphere list; user drags one into canvas
uiShell asks formulaCard.sumIf(df,{slot:code})
formulaCard checks localForage cache â†’ compute â†’ returns result
uiShell draws Chart.js doughnut (or chosen chart type in later backlog)
User moves/resizes card, selects multi-cards â†’ Mix wizard (week 3 backlog)
User â€œSave Layoutâ€ â†’ download JSON for portability.
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
4. SECURITY & ROBUSTNESS
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Front-end only, yet still enforce:
â€¢ CSV sanitisation: strip <script>, control chars, oversized lines.
â€¢ CSP meta-tag: default-src â€˜selfâ€™; connect-src â€˜selfâ€™ data: blob:; object-src â€˜noneâ€™.
â€¢ try/catch around all Danfo operations; uiShell overlays .err div (red bar) on any uncaught error â€“ matches â€œError transparencyâ€ rule.
â€¢ Accessibility: ARIA-roles on buttons/list items; focus trap when dialogs open; colour-contrast passes WCAG AA (dark/light/hc themes).

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
5. PERFORMANCE & LIMITS
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Target laptop spec: i5/8 GB, Chrome 122.
â€¢ Parse 50 000-row file  â‰¤ 1 000 ms.
â€¢ First card calculation â‰¤ 200 ms for numeric SUMIF on same dataset.
â€¢ 60 FPS drag/resize on card count â‰¤ 50 (Canvas is <div>, Chart.js renders in its own canvas).
Optimisations in place:
â€¢ Web-worker not needed yet; Danfo is fast enough.
â€¢ localForage cache avoids recompute on identical filters.
â€¢ Lazy Chart.js destroy/instantiate when card closed.

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
6. DEPLOYMENT / DEV-OPS
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Because it is Static:
â€¢ Build tool optional; recommend Vite for ES2021 bundling + dev-server (npm run dev).
â€¢ CI: GitHub Actions â†’ â€œnpm ci && vitest run && vite buildâ€ â†’ artefact upload â†’ GitHub Pages / Netlify / S3 + CloudFront.
â€¢ Automatic Lighthouse CI to guard performance + a11y budget.
â€¢ Versioning: SemVer, tag release v0.1-alpha (current), v0.2 (unit-tests), v1.0 (feature-complete).
â€¢ Backup: repo itself + user downloads layout JSON; no server data to back up.

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
7. TEST STRATEGY
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Unit (Vitest)
â€¢ parserSphere: multi-block, mixed EOL, TSV flag, duplicate header error.
â€¢ formulaCard: every agg func with/without invert; cache-hit timing < cache-miss.
Integration
â€¢ Simulate drag sphere â†’ card creation â†’ result render (Playwright).
â€¢ Theme toggle retains after Save/Load layout.
Load
â€¢ JSDOM benchmark parse 200 k lines (stress) â€“ memory â‰¤ 200 MB.

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
8. IMPLEMENTATION PHASES & TIMELINE
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Week-0  (DONE)  â€“ parserSphere 0.1, smoke HTML.
Week-1          â€“ finish parser unit-tests, file-load UI console-log (âœ…).
Week-2          â€“ formulaCard engine + caching; basic number card (âœ…).
Week-3          â€“ UI polish (present state), theme toggle, save/load (âœ…).
Week-4          â€“ Back-log items:
â€¢ Mix-Card wizard (multi-axis, chart type picker)
â€¢ Keyboard a11y, Delete key close, resize ghost-preview
â€¢ Error overlay animation / copy-tooltip
â€¢ Grid-snap & card-alignment helpers
â€¢ README â€œextensibilityâ€ section.
RC-Freeze Week-5 â€“ Lighthouse CI â‰¥ 90/90/100/100 (Perf/Acc/Best-Prac/SEO).
v1.0 Release    â€“ Publish static bundle, cut tag, generate GitHub Pages.

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
9. SUCCESS METRICS
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â€¢ â‰¤ 2 s First Contentful Paint on 3 MB CSV.
â€¢ â‰¥ 95 % Unit-test coverage parser + formula.
â€¢ 0 console-error during scripted Playwright scenario.
â€¢ User feedback: â€œno formula strings shownâ€, â€œcan move cards freelyâ€, â€œtheme toggle obviousâ€.
â€¢ Documentation: 100 % public functions have JSDoc.

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
10. HOW TO EXTEND (README EXCERPT)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â€¢ Add new Stat code or slot: just include new column in HEAD: line; no code change.
â€¢ Add new chart: create /charts/YourType.js exporting draw(ctx, data, opts) â€“ UI wizard auto-lists modules under /charts.
â€¢ Add function: implement in formulaCard, export, then allow UI wizard to pick func name (auto introspect Object.keys(fc)).

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
This blueprint maps every requirement stated in the Master Prompt (pages 1-3) and in the code snippets (pages 4-17).
You may now hand it to developers or use it as the README â€œSystem-overviewâ€ section.



à¹€à¸‚à¹‰à¸²à¹ƒà¸ˆà¸§à¹ˆà¸²à¸„à¸¸à¸“à¸•à¹‰à¸­à¸‡à¸à¸²à¸£ â€œà¹à¸¡à¹‡à¸›à¸œà¸±à¸‡à¸£à¸°à¸šà¸šâ€ (System Mapping) à¸ªà¸³à¸«à¸£à¸±à¸šà¹€à¸§à¹‡à¸šà¹à¸­à¸› â€” à¸‹à¸¶à¹ˆà¸‡à¸œà¸¡à¹€à¸‚à¹‰à¸²à¹ƒà¸ˆ (à¸­à¸²à¸ˆà¸œà¸´à¸”à¸à¸¥à¸²à¸”à¹€à¸¥à¹‡à¸à¸™à¹‰à¸­à¸¢) à¸§à¹ˆà¸²à¸­à¸¢à¸²à¸à¹ƒà¸«à¹‰à¸„à¸£à¸­à¸šà¸„à¸¥à¸¸à¸¡à¸—à¸±à¹‰à¸‡ â¶â€‹à¸ªà¸–à¸²à¸›à¸±à¸•à¸¢à¸à¸£à¸£à¸¡ Frontend-Backend à¹à¸šà¸šà¸¡à¸µ Server-Side Rendering, â·â€‹à¹‚à¸„à¸£à¸‡à¸ªà¸£à¹‰à¸²à¸‡à¸à¸²à¸™à¸‚à¹‰à¸­à¸¡à¸¹à¸¥ MySQL, à¹à¸¥à¸° â¸â€‹à¸‚à¸±à¹‰à¸™à¸•à¸­à¸™ DevOps deploy à¸‚à¸¶à¹‰à¸™ AWS à¹ƒà¸Šà¹ˆà¹„à¸«à¸¡à¸„à¸£à¸±à¸š?

à¸£à¸šà¸à¸§à¸™à¸¢à¸·à¸™à¸¢à¸±à¸™à¸«à¸£à¸·à¸­à¹à¸à¹‰à¹„à¸‚à¸ˆà¸¸à¸”à¸•à¹ˆà¸­à¹„à¸›à¸™à¸µà¹‰à¹ƒà¸«à¹‰à¸Šà¸±à¸”à¸à¹ˆà¸­à¸™à¸ˆà¸°à¸¥à¸‡à¸¡à¸·à¸­à¸­à¸­à¸à¹à¸šà¸šà¸ˆà¸£à¸´à¸‡ ğŸ™‚

à¹€à¸§à¹‡à¸šà¸™à¸µà¹‰à¸•à¹‰à¸­à¸‡ â€œà¸¡à¸µ Back-end à¹€à¸•à¹‡à¸¡à¸£à¸¹à¸›à¹à¸šà¸šâ€ à¸«à¸£à¸·à¸­à¹€à¸›à¹‡à¸™ â€œPure-Frontend (No-Server)â€ à¸•à¸²à¸¡ Master Prompt à¹€à¸”à¸´à¸¡?
à¸œà¸¥à¸¥à¸±à¸à¸˜à¹Œà¸—à¸µà¹ˆà¸•à¹‰à¸­à¸‡à¸à¸²à¸£à¸„à¸·à¸­ â€œà¸œà¸±à¸‡à¸ à¸²à¸ (diagram) + à¸„à¸³à¸­à¸˜à¸´à¸šà¸²à¸¢â€ à¸«à¸£à¸·à¸­ â€œà¸£à¸²à¸¢à¸à¸²à¸£ Task/Loom timelineâ€ ?
à¸¡à¸µà¸•à¸±à¸§à¸­à¸¢à¹ˆà¸²à¸‡ CSV/à¹‚à¸„à¹‰à¸”à¹€à¸šà¸·à¹‰à¸­à¸‡à¸•à¹‰à¸™à¸—à¸µà¹ˆà¸•à¹‰à¸­à¸‡à¸™à¸³à¸¡à¸²à¸›à¸£à¸°à¸à¸­à¸šà¸à¸²à¸£à¸­à¸˜à¸´à¸šà¸²à¸¢à¹€à¸à¸´à¹ˆà¸¡à¹€à¸•à¸´à¸¡à¸«à¸£à¸·à¸­à¹„à¸¡à¹ˆ?
à¸–à¹‰à¸²à¹€à¸‚à¹‰à¸²à¹ƒà¸ˆà¸–à¸¹à¸à¸•à¹‰à¸­à¸‡à¹à¸¥à¹‰à¸§ à¸œà¸¡à¸ˆà¸°à¸ˆà¸±à¸”à¸—à¸³ System Mapping (Component Diagram + Data-Flow + Task Breakdown) à¹ƒà¸«à¹‰à¹€à¸¥à¸¢à¸„à¸£à¸±à¸š

No file chosenNo file chosen
à¸à¹‡à¸­à¸¢à¸¹à¹ˆà¹ƒà¸™à¹„à¸Ÿà¸¥à¹Œà¸—à¸±à¹‰à¸‡à¸«à¸¡à¸” à¸ªà¹ˆà¸§à¸™à¹€à¸£à¸·à¹ˆà¸­à¸‡à¹€à¸—à¸„à¸™à¸´à¸„à¸‰à¸±à¸™à¹„à¸¡à¹ˆà¸£à¸¹à¹‰ à¸‰à¸±à¸™à¸•à¸­à¸šà¹„à¸¡à¹ˆà¹„à¸”à¹‰ à¸«à¸²à¸ prompt à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¸šà¸­à¸à¹„à¸”à¹‰à¸à¹‡à¸–à¸·à¸­à¸§à¹ˆà¸²à¸‰à¸±à¸™à¹„à¸¡à¹ˆà¸£à¸¹à¹‰à¸­à¸¢à¸¹à¹ˆà¸”à¸µ

SYSTEM-MAPPING & DELIVERY BLUEPRINT
Pure-Frontend â€œAntinormalization Dashboardâ€ (Master-Prompt v1.0 â€“ LOCKED)

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

HIGH-LEVEL ARCHITECTURE
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Browser is the only runtime â†’ three ES-Module layers that communicate via DOM CustomEvents.

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         spherePackReady          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Parser-Sphereâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ â”‚   UI-Shell    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  DataFrame, Sphere[]              â”‚ (Canvas + UX)â”‚
â–²  â–²                                         â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚  â”‚ validateSlots()                                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚ cardRequiresCalc
â”‚                              â”‚                    â–¼
CSV/TXT â”‚                              â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
file     â”‚                              â”‚  calcResultâ”‚ Formula-Card â”‚
â–¼                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â–¶â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
PapaParse / TSV fallback (optional)                 localForage-cache

â€¢  No server, no DB: every artefact is in-memory; persistence = File Download (layout.json / txt cache).
â€¢  Third-party libs (all via CDN): Danfo.js (DataFrame), Chart.js (visuals), interact.js (D&D/resize), localForage (IndexedDB wrapper).

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2. DETAILED COMPONENT SPECS
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2.1 parserSphere.js
â€¢ parseCSV()  â€“ ingests string, splits HEAD:/DATA:, returns Danfo DataFrame + Sphere[]
â€¢ Sphere structure (see page 2 col. 1 of the PDF):
{ code, rawHeader, family:{id1,id2,statN,statC,slot}, typeHint, invert }
â€¢ Emits â€˜spherePackReadyâ€™.
â€¢ validateSlots(df)  â€“ numeric vs nonNumeric categorisation.

2.2 formulaCard.js
â€¢ Public agg funcs: sumIf, countIf, uniqueIf, indexIf, avgIf.
â€¢ filtersObj schema = { id1, id2, statN, statC, dateFrom, dateTo, slot, invert? }.
â€¢ _aggregate() builds Boolean mask with Danfo query, observes â€œInvertâ€ rule, caches by JSON-hash key in localForage.
â€¢ Returns { result, rows, meta:{durationMs,cached} }.

2.3 uiShell.js
â€¢ â€œWorld-Fittingâ€ sidebar lists every Sphere (button-style div).
â€¢ Drag sphere â†’ canvas â‡’ _spawnCard() generates <div.card> with Chart canvas.
â€¢ interact.js grants free move / resize; ESC or Delete (back-log) closes card.
â€¢ Top-bar actions: Toggle Theme, Validate Slots, Save Layout, Load Layout.
â€¢ Layout JSON = {theme, cards:[{code,x,y,w,h}]}.
â€¢ Accessibility: data-theme = dark | light | hc; all colours via CSS custom-props.

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
3. DATA FLOW WALK-THROUGH
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

User clicks â€œLoad CSVâ€ (file input).
File text â†’ parseCSV()
parserSphere dispatches spherePackReady(df, spheres[])
uiShell renders sphere list; user drags one into canvas
uiShell asks formulaCard.sumIf(df,{slot:code})
formulaCard checks localForage cache â†’ compute â†’ returns result
uiShell draws Chart.js doughnut (or chosen chart type in later backlog)
User moves/resizes card, selects multi-cards â†’ Mix wizard (week 3 backlog)
User â€œSave Layoutâ€ â†’ download JSON for portability.
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
4. SECURITY & ROBUSTNESS
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Front-end only, yet still enforce:
â€¢ CSV sanitisation: strip <script>, control chars, oversized lines.
â€¢ CSP meta-tag: default-src â€˜selfâ€™; connect-src â€˜selfâ€™ data: blob:; object-src â€˜noneâ€™.
â€¢ try/catch around all Danfo operations; uiShell overlays .err div (red bar) on any uncaught error â€“ matches â€œError transparencyâ€ rule.
â€¢ Accessibility: ARIA-roles on buttons/list items; focus trap when dialogs open; colour-contrast passes WCAG AA (dark/light/hc themes).

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
5. PERFORMANCE & LIMITS
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Target laptop spec: i5/8 GB, Chrome 122.
â€¢ Parse 50 000-row file  â‰¤ 1 000 ms.
â€¢ First card calculation â‰¤ 200 ms for numeric SUMIF on same dataset.
â€¢ 60 FPS drag/resize on card count â‰¤ 50 (Canvas is <div>, Chart.js renders in its own canvas).
Optimisations in place:
â€¢ Web-worker not needed yet; Danfo is fast enough.
â€¢ localForage cache avoids recompute on identical filters.
â€¢ Lazy Chart.js destroy/instantiate when card closed.

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
6. DEPLOYMENT / DEV-OPS
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Because it is Static:
â€¢ Build tool optional; recommend Vite for ES2021 bundling + dev-server (npm run dev).
â€¢ CI: GitHub Actions â†’ â€œnpm ci && vitest run && vite buildâ€ â†’ artefact upload â†’ GitHub Pages / Netlify / S3 + CloudFront.
â€¢ Automatic Lighthouse CI to guard performance + a11y budget.
â€¢ Versioning: SemVer, tag release v0.1-alpha (current), v0.2 (unit-tests), v1.0 (feature-complete).
â€¢ Backup: repo itself + user downloads layout JSON; no server data to back up.

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
7. TEST STRATEGY
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Unit (Vitest)
â€¢ parserSphere: multi-block, mixed EOL, TSV flag, duplicate header error.
â€¢ formulaCard: every agg func with/without invert; cache-hit timing < cache-miss.
Integration
â€¢ Simulate drag sphere â†’ card creation â†’ result render (Playwright).
â€¢ Theme toggle retains after Save/Load layout.
Load
â€¢ JSDOM benchmark parse 200 k lines (stress) â€“ memory â‰¤ 200 MB.

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
8. IMPLEMENTATION PHASES & TIMELINE
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Week-0  (DONE)  â€“ parserSphere 0.1, smoke HTML.
Week-1          â€“ finish parser unit-tests, file-load UI console-log (âœ…).
Week-2          â€“ formulaCard engine + caching; basic number card (âœ…).
Week-3          â€“ UI polish (present state), theme toggle, save/load (âœ…).
Week-4          â€“ Back-log items:
â€¢ Mix-Card wizard (multi-axis, chart type picker)
â€¢ Keyboard a11y, Delete key close, resize ghost-preview
â€¢ Error overlay animation / copy-tooltip
â€¢ Grid-snap & card-alignment helpers
â€¢ README â€œextensibilityâ€ section.
RC-Freeze Week-5 â€“ Lighthouse CI â‰¥ 90/90/100/100 (Perf/Acc/Best-Prac/SEO).
v1.0 Release    â€“ Publish static bundle, cut tag, generate GitHub Pages.

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
9. SUCCESS METRICS
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â€¢ â‰¤ 2 s First Contentful Paint on 3 MB CSV.
â€¢ â‰¥ 95 % Unit-test coverage parser + formula.
â€¢ 0 console-error during scripted Playwright scenario.
â€¢ User feedback: â€œno formula strings shownâ€, â€œcan move cards freelyâ€, â€œtheme toggle obviousâ€.
â€¢ Documentation: 100 % public functions have JSDoc.

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
10. HOW TO EXTEND (README EXCERPT)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â€¢ Add new Stat code or slot: just include new column in HEAD: line; no code change.
â€¢ Add new chart: create /charts/YourType.js exporting draw(ctx, data, opts) â€“ UI wizard auto-lists modules under /charts.
â€¢ Add function: implement in formulaCard, export, then allow UI wizard to pick func name (auto introspect Object.keys(fc)).

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
This blueprint maps every requirement stated in the Master Prompt (pages 1-3) and in the code snippets (pages 4-17).
You may now hand it to developers or use it as the README â€œSystem-overviewâ€ section.

No file chosenNo file chosen
end ???

Below is the COMPLETE, self-contained â€œDesign & Development Reportâ€ for the HR / Payroll platform that must comply with Thai labour- and tax-law.
It bundles every topic listed in the Master file (core, technical, compliance, performance, deployment, success metrics, etc.) so you can hand it directly to the engineering team, procurement, investors, or auditors.

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

SYSTEM ARCHITECTURE & TECHNOLOGY STACK â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ 1.1 Macro-view (4-tier) â€¢ Presentation tier â€“ SPA written in Vue 3 + Pinia state, Vue-Router, Vite build, PWA manifest, TailwindCSS, ECharts 5. â€¢ API tier â€“ RESTful JSON API on PHP 8.3 (Laravel 11) with Sanctum token auth, Rate Limiter, OpenAPI 3.1 spec. â€¢ Service tier â€“ Laravel Queues (Redis driver) for heavy jobs: payroll run, file exports, e-mail burst, SSO sync. â€¢ Data tier â€“ Amazon RDS Aurora-MySQL 8.0 (utf8mb4), Redis 7, S3 for file/BLOB storage, ElasticSearch 8 for full-text HR document search.
1.2 Key supporting services
â€¢ CloudFront CDN (static frontend), WAF, ACM TLS.
â€¢ AWS SES (outbound e-mail), SNS (push notifications), EventBridge (scheduled jobs).
â€¢ HashiCorp Vault (secret rotation), Amazon KMS (encryption keys).
â€¢ Grafana-Loki (logs), Prometheus + Grafana (metrics), Sentry (frontend+backend error tracking).

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2. CORE FUNCTIONALITIES
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2.1 HR & Employee Records
â€“ Employee master, dependent list, emergency contacts, education, visa/permit, PDPA consent ledger (signed PDF + hash).
â€“ Department / cost-centre tree with role-based data segregation.

2.2 Payroll Engine (Thai compliance)
Flow: Attendance â†’ Time sheets â†’ Allowances/O.T. â†’ Statutory calculations â†’ Approval â†’ Payslip â†’ Bank file.
â€¢ Progressive PIT (Personal Income Tax) brackets 2024.
â€¢ Social Security (SSO) 5 % capped at à¸¿750/month.
â€¢ Provident Fund (optional) variable contribution with employer matching rules.
â€¢ Auto-prorate for mid-month join/terminate, leave without pay, maternity, etc.
â€¢ Retroactive adjustment support (e.g., new tax card arrival).
â€¢ End-of-year PND 1A + digital signature, XML generator for e-filing.

2.3 Leave & Time Attendance
â€¢ Configurable leave types, entitlement accrual rules, carry-forward caps, negative balance guard.
â€¢ Multi-level approval flow (Request â†’ Manager â†’ HR).
â€¢ Public-holiday calendar import from gov-API.

2.4 Commission & Overtime
â€¢ Rate table per product / sales tier.
â€¢ O.T. calc 1.5 Ã—, 2 Ã—, 3 Ã— depending on labour law categories; weekly/monthly caps.

2.5 Dynamic Deduction / Benefit Module
â€¢ Semantic data layer allows formula definitions (e.g., â€œLoanInstalment = (Amount / Term) * (1 + IRR)â€).
â€¢ Evidence file attachment (contract scans) stored on S3 with SHA-256 fingerprint in DB.

2.6 Reporting & Dashboards
â€¢ 30+ canned reports (pay register, cost-centre by GL code, SSO submission, WHT certificates).
â€¢ Custom Report Builder uses ElasticSearch aggregations + Vue drag-and-drop UI.
â€¢ Exports: PDF (WeasyPrint), XLSX, CSV, JSON.

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
3. DATABASE DESIGN (core tables, abbreviated)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
employees(id, emp_code, first_name_th, first_name_en, dept_id, hire_date, status, â€¦)
departments(id, parent_id, name_th, name_en, cost_centre)
payslips(id, emp_id, period, gross, net, pit, sso, prov_fund, status, pdf_path, â€¦)
pay_items(id, payslip_id, code, type(enum: EARNING/DEDUCTION), amount, evidence_id)
overtimes(id, emp_id, date, hours, rate_code, approval_status)
leave_requests(id, emp_id, leave_type, date_from, date_to, hours, approver_id, status)
system_audit(id, user_id, action, model, model_id, diff_json, ip, ts)
Indexes: composite (emp_id, period) on payslips; partition payslips BY RANGE (period) monthly.
Sensitive columns (id_card, bank_account) encrypted with AES-GCM via Laravelâ€™s Eloquent-Cast + KMS keys.

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
4. SECURITY & COMPLIANCE
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â€¢ PDPA: lawful basis recorded; per-purpose consent table; Data-Subject-Request endpoint with 30-day SLA.
â€¢ TLS 1.3 everywhere, HSTS, CSP â€œstrict-dynamicâ€, CSRF double-submit cookie.
â€¢ OWASP-10 controls: input validation via Laravel FormRequest, param binding, output escaping on Vue.
â€¢ Infra hardening: WAF SQLi/XSS rules, Security Hub baseline, IAM least-privilege policies.
â€¢ Audit trail immutability: system_audit rows hashed & appended to AWS QLDB stream nightly.
â€¢ Database-level row-level-security (RLS) emulated: dept_id filter enforced in every Eloquent Global Scope.

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
5. TEST STRATEGY
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â€¢ Unit tests (PHPUnit) â€º 4 000 assertions, coverage â‰¥ 90 %.
â€¢ Frontend tests (Vitest + Vue Test Utils) & component snapshot diff.
â€¢ API contract tests (Pact) with Postman newman CI run.
â€¢ Integration tests: Laravel Dusk headless Chrome for end-to-end leave â†’ payroll â†’ payslip PDF.
â€¢ Load test: k6 script pushes 10 payroll runs (5 000 employees) â‰¤ 4 min w/ P95 API < 800 ms.
â€¢ Security test: OWASP ZAP baseline scan, snyk for deps, trivy for image scan.
â€¢ Acceptance: UAT checklist signed by HR, Finance, Legal.

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
6. PERFORMANCE & SCALABILITY
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â€¢ Code-level: eager-load, index hints, read-write-split (Aurora replica).
â€¢ Caching: Redis-tagged cache on reference tables & config; payslip PDFs cached in CloudFront.
â€¢ Queue workers autoscale on SQS depth (EventBridge rule).
â€¢ Observability: Prometheus alerts (p95 latency â‰¥ 1 s, queue backlog > 500, CPU > 75 %).
â€¢ Target scalability: 20 000 employees, payroll â‰¤ 20 minutes at 4Ã— r6g.large.

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
7. DEPLOYMENT & DEVOPS
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Pipeline (GitHub Actions)
stage-1 : npm ci & vite build â†’ static artefact
stage-2 : composer install, phpunit, pint (CS)
stage-3 : docker build (nginx-alpine, php-fpm 8.3, supervisor), trivy scan
stage-4 : push to ECR
stage-5 : Terraform plan + apply (ECS Fargate blue-green), DB migration, seed stub data
stage-6 : smoke tests, canary 5 %, auto-promote if SLO intact 30 min.

Back-up & DR
â€¢ RDS automated backup 14 days, binlog to S3.
â€¢ S3 versioning + replication cross-region.
â€¢ Weekly AMI snapshot of ECS task definition.
â€¢ RTO 4 h, RPO 15 min.

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
8. IMPLEMENTATION PHASES & TIMELINE
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Phase 0  MVP (12 weeks)
â€“ Core HR, Leave, Payroll for â‰¤ 200 staff; 1 stat bank export; no provident fund.
Phase 1  (8 weeks)
â€“ Commission, multi-bank export, Provident Fund, ElasticSearch reporting.
Phase 2  (6 weeks)
â€“ PDPA Self-Service, multi-company tenancy, QLDB immutable audit.
Phase 3  (4 weeks)
â€“ BI dashboards, external SSO (Azure AD, Google), bilingual UI.
Go-Live checklist (week M+1) â†’ Post-Go-Live hyper-care 2 weeks.

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
9. SUCCESS METRICS
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Uptime â‰¥ 99.9 % (monthly)
Payroll cycle processing â‰¤ 15 min / 10 000 employees
P95 API latency < 500 ms
Support tickets < 3 % of active users / month
Audit findings: 0 critical
User NPS â‰¥ 55 within 6 months
Frontend Lighthouse: Perf â‰¥ 90, Acc â‰¥ 95

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
10. EXPECTED OUTCOMES
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â€¢ Full legal compliance (Thai PIT, SSO, PDPA).
â€¢ Robust, horizontally scalable architecture ready for additional ASEAN tax modules.
â€¢ Clear audit trail for all data changes & approvals.
â€¢ Seamless user experience (desktop PWA + mobile).
â€¢ CI/CD & IaC ensure repeatable, low-risk releases.
â€¢ Business KPI visibility via real-time dashboards.

END OF REPORT â€“ ready for production execution.